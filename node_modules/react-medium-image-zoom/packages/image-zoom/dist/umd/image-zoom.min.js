!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((n="undefined"!=typeof globalThis?globalThis:n||self)["miz-umd"]={})}(this,(function(n){"use strict";var t,o,e=function(n,t,o,e){void 0===e&&(e=!1),o.addEventListener(n,t,e)},i=function(n,t){return t.appendChild(n)},r=function(n){return document.createElement(n)},a=function(n,t,o){var e=window.innerWidth/(n+o),i=window.innerHeight/(t+o);return Math.min(e,i)},l=function(n,t,o){n.insertAdjacentElement(t,o)},u=function(n,t,o,e){void 0===e&&(e=!1),o.removeEventListener(n,t,e)},c=function(n,t,o){return o.setAttribute(n,t)},d=function(n,t){n.innerHTML=t};!function(n){n.UNZOOMED="UNZOOMED",n.UNZOOMING="UNZOOMING",n.ZOOMED="ZOOMED",n.ZOOMING="ZOOMING"}(t||(t={})),function(n){n.UNZOOM="UNZOOM",n.ZOOM="ZOOM"}(o||(o={}));var f=t.UNZOOMED,v=t.UNZOOMING,s=t.ZOOMED,p=t.ZOOMING,m=o.UNZOOM,g=o.ZOOM,h=function(n,t){void 0===n&&(n={preventScroll:!1}),null==t||t.focus(n)}.bind(null,{preventScroll:!0}),O=function(n){return null!=n},y=function(n,t,o,e){e.style.setProperty(t,o,n)}.bind(null,void 0),b="ACTION",w="alt",z="aria-label",M="aria-labelledby",x="aria-modal",E="background-color",T="blur",Z="button",N="click",I="cursor",L="data-rmiz-container",C="data-rmiz-dialog",H="data-rmiz-dialog-img",D="data-rmiz-overlay",G="data-rmiz-zoom-button",U="dialog",S="div",V="focus",k="id",A="rmiz-modal-label",B="img",j="keydown",P="opacity",W="resize",R="role",X="src",_="STATE",q="style",F="tabindex",K="transform",Y="transition-duration",J="type",Q="0",$='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 489.3 489.3"><path d="M476.95 0H12.35C5.55 0 .15 5.5.15 12.2V235c0 6.8 5.5 12.2 12.2 12.2s12.3-5.5 12.3-12.2V24.5h440.2v440.2h-211.9c-6.8 0-12.3 5.5-12.3 12.3s5.5 12.3 12.3 12.3h224c6.8 0 12.3-5.5 12.3-12.3V12.3c0-6.8-5.5-12.3-12.3-12.3z"/><path d="M.05 476.9c0 6.8 5.5 12.3 12.2 12.3h170.4c6.8 0 12.3-5.5 12.3-12.3V306.6c0-6.8-5.5-12.3-12.3-12.3H12.35c-6.8 0-12.2 5.5-12.2 12.3v170.3h-.1zm24.5-158.1h145.9v145.9H24.55V318.8zM222.95 266.3c2.4 2.4 5.5 3.6 8.7 3.6s6.3-1.2 8.7-3.6l138.6-138.7v79.9c0 6.8 5.5 12.3 12.3 12.3s12.3-5.5 12.3-12.3V98.1c0-6.8-5.5-12.3-12.3-12.3h-109.5c-6.8 0-12.3 5.5-12.3 12.3s5.5 12.3 12.3 12.3h79.9L222.95 249c-4.8 4.8-4.8 12.5 0 17.3z"/></svg>',nn="-webkit-appearance:none;-moz-appearance:none;appearance:none;",tn="cursor:pointer;cursor:zoom-in;",on="cursor:pointer;cursor:zoom-out;",en="position:absolute;",rn=en+"clip:rect(0 0 0 0);clip-path:inset(50%);width:1px;height:1px;overflow:hidden;white-space:nowrap;",an=tn+en+rn;n.default=function(n){var t,o,ln,un,cn,dn,fn,vn,sn=void 0===n?{}:n,pn=sn.auto,mn=void 0===pn||pn,gn=sn.margin,hn=void 0===gn?0:gn,On=sn.onChange,yn=void 0===On?void 0:On,bn=sn.overlayBgColor,wn=void 0===bn?"#fff":bn,zn=sn.overlayOpacity,Mn=void 0===zn?1:zn,xn=sn.transitionDuration,En=void 0===xn?300:xn,Tn=sn.unzoomLabel,Zn=void 0===Tn?"Unzoom image":Tn,Nn=sn.zIndex,In=void 0===Nn?2147483647:Nn,Ln=sn.zoomLabel,Cn=void 0===Ln?"Zoom image":Ln,Hn=sn.zoomTitle,Dn=void 0===Hn?"Zoomed item":Hn,Gn=document.body,Un=window,Sn=f,Vn=[],kn=function(n,t){if(void 0===t&&(t=!1),t||(Vn=Vn.filter((function(t){return t!==n}))),n&&y(I,"",n),mn&&n){u(N,Fn,n);var o=function(n){return n.nextSibling}(n);o instanceof HTMLButtonElement&&(u(V,Qn,o),u(T,Jn,o))}},An=function(n){var t=n.type,o=n.value;yn&&yn({type:t,value:o})},Bn=function(n){An({type:_,value:Sn=n})},jn=function(){var n;ln=r(S),c(L,"",ln),y("zIndex",""+In,ln),vn=r(S),c(D,"",vn),c(q,"position:fixed;top:0;right:0;bottom:0;left:0;background-color:"+wn+";transition-duration:"+En+"ms;transition-property:opacity;opacity:0;will-change:opacity;"+on,vn),t=r(S),c(F,Q,t),o=r(S),c(F,Q,o),un=r(S),c(M,A,un),c(x,"true",un),c(C,"",un),c(R,U,un),c(F,Q,un),cn=r(Z),fn=r(S),c(q,rn,fn),c(k,A,fn),n=Dn,fn.innerText=n,i(cn,un),i(fn,un),i(vn,ln),i(t,ln),i(un,ln),i(o,ln)},Pn=function(){for(var n=0,e=Vn;n<e.length;n++){var i=e[n];kn(i,!0)}Wn(),t=void 0,o=void 0,ln=void 0,cn=void 0,un=void 0,fn=void 0,vn=void 0,Vn=[],Bn(f)},Wn=function(){var n,e;u(W,Yn,Un),ln&&u(N,Kn,ln),t&&u(V,qn,t),o&&u(V,qn,o),ln&&(n=ln,(e=Gn).contains(n)&&e.removeChild(n))},Rn=function(){Bn(v),Wn(),Bn(f)},Xn=function(n){if(n instanceof HTMLImageElement){Bn(p);var l=function(n){return n?n.getBoundingClientRect():{bottom:0,height:0,left:0,right:0,top:0,width:0,x:0,y:0}}(n),u=l.height,d=l.left,f=l.top,v=l.width,m=n.naturalHeight,g=n.naturalWidth,h=function(n,t){return function(n){return n.style}(t)[n]}(K,n),O=h?" "+h:"",b=function(n,t,o,e,i){var r=a(t,e,i),l=t>e?t/n:e/o;return r>1?l:r*l}(v,g,u,m,hn),z=window.pageYOffset,M=window.pageXOffset,x="scale(1) translate3d("+-d+"px,0px,0)"+O;if(console.log({height:u,left:d,top:f,width:v,naturalWidth:g,naturalHeight:m,scale:b}),dn=r(B),c(w,n.alt,dn),c(X,n.currentSrc,dn),c(H,"",dn),!ln||!un||!dn)return;c(q,en+"top:"+(z+f)+"px;left:"+(M+d)+"px;height:"+u*b+"px;width:"+v*b+"px;transform:scale("+1/b+") translate3d(0,0,0)"+O+";transition:transform "+En+"ms cubic-bezier(0.2,0,0.2,1);transform-origin:top left;"+on,dn),i(dn,un),i(ln,Gn),e(W,Yn,Un),e(j,_n,document),ln&&e(N,Kn,ln),t&&e(V,qn,t),o&&e(V,qn,o),function(n){window.requestAnimationFrame(n)}((function(){var t,o;t=function(){n&&dn&&(y(K,x,dn),Bn(s))},o=0,window.setTimeout(t,o)}))}n instanceof SVGElement&&console.log("GOT AN SVG HERE!")},_n=function(n){(function(n){return"Escape"===n.key||27===n.keyCode})(n)&&(!function(n){n.stopPropagation()}(n),An({type:b,value:m}),mn&&Rn())},qn=function(){h(cn)},Fn=function(n){An({type:b,value:g}),mn&&Xn(n.currentTarget)},Kn=function(){console.log("MODAL CLICKED!"),An({type:b,value:m}),mn&&Rn()},Yn=function(){Sn===s&&(An({type:b,value:m}),mn&&Rn())},Jn=function(n){c(q,an,n.currentTarget)},Qn=function(n){c(q,nn+tn+en+"padding:3px;width:30px;height:30px;background:#fff;border:none;fill:#707070;transform:translateX(-100%);",n.currentTarget)},$n=function(n){var t=n.currentTarget,o=t.previousSibling;o instanceof HTMLImageElement&&(An({type:b,value:g}),mn&&Xn(o))};return jn(),{attach:function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(n.length)for(var o=function(n){if(n instanceof HTMLImageElement||n instanceof SVGElement){y(I,"pointer",n),y(I,"zoom-in",n);var t=r(Z);c(z,Cn,t),c(G,"",t),c(q,an,t),c(J,Z,t),d(t,$),l(n,"afterend",t),mn&&(e(N,Fn,n),e(N,$n,t),e(V,Qn,t),e(T,Jn,t),Vn.push(n))}},i=0,a=n;i<a.length;i++){var u=a[i];if(u instanceof NodeList||u instanceof Array)for(var f=0,v=u;f<v.length;f++){var s=v[f];o(s)}else o(u)}},detach:kn,reset:function(){Pn(),jn()},teardown:Pn,unzoom:Rn,update:function(n){var t,o,e,i,r,a,l,u,c,d;void 0===n&&(n={}),mn=null!==(t=n.auto)&&void 0!==t?t:mn,hn=null!==(o=n.margin)&&void 0!==o?o:hn,yn=null!==(e=n.onChange)&&void 0!==e?e:yn,wn=null!==(i=n.overlayBgColor)&&void 0!==i?i:wn,Mn=null!==(r=n.overlayOpacity)&&void 0!==r?r:Mn,En=null!==(a=n.transitionDuration)&&void 0!==a?a:En,Zn=null!==(l=n.unzoomLabel)&&void 0!==l?l:Zn,In=null!==(u=n.zIndex)&&void 0!==u?u:In,Cn=null!==(c=n.zoomLabel)&&void 0!==c?c:Cn,Dn=null!==(d=n.zoomTitle)&&void 0!==d?d:Dn,ln&&y("zIndex",""+In,ln),vn&&(O(n.overlayBgColor)&&y(E,wn,vn),O(n.overlayOpacity)&&y(P,""+Mn,vn),O(n.transitionDuration)&&y(Y,""+En,vn)),fn&&(fn.innerText=Dn),cn&&(cn.innerText=Zn)},zoom:Xn}},Object.defineProperty(n,"__esModule",{value:!0})}));
