<!doctype html>
<html>

	<head>

		<link type="text/css" rel="stylesheet" href="treez-text-area.css" />

		<link rel="import" href="./../../treezElement.html" >	

        <script>

            class TreezTextArea extends TreezElement {
            	
            	static get observedAttributes() {
            		return TreezElement.observedAttributes.concat(['label']);                    
                }

            	get label() {
				  return this.getAttribute('label');
				}

				set label(newValue) {
				  this.setAttribute('label', newValue);	  

				}             	

                constructor(){
                    super();                                  
                    this.__label = undefined;  
                    this.__container = undefined;
                    this.__textArea = undefined;                            
                }            	

                connectedCallback() {
                	

                    if(!this.__label){                     

                        var label = document.createElement('label');  
                        this.__label = label;                     
                        label.innerText = this.label;                       
                        this.appendChild(label);  

                        var container = document.createElement('div');
                        this.__container = container;
                        this.appendChild(container);                                        

                        var textArea = document.createElement('textarea');                       
                        this.__textArea = textArea;
                        textArea.onchange = ()=>this.__textAreaChanged();                                              
                        container.appendChild(textArea);    		
                    }
                    
                    this.updateElements(this.value);	
                    this.disableElements(this.disabled)
					this.hideElements(this.hidden); 
                }
                
                updateElements(newValue){
                	if(this.__textArea){                    	
						this.__textArea.value = newValue; 
                	}					    
                } 
                
                
                disableElements(booleanValue){
                	if(this.__textArea){   
                		this.__textArea.disabled = booleanValue;
                	}
                }	
               
                hideElements(booleanValue){
                	if(this.__label){   
                		this.hide(this.__label, booleanValue);
                		this.hide(this.__container, booleanValue); 
                	}
                }	  

                __textAreaChanged(){
                	this.value = this.__textArea.value;                	
                }  

                attributeChangedCallback(attr, oldValue, newValue) {
                	super.attributeChangedCallback(attr, oldValue, newValue) 
                    if(attr==='label'){
                    	if(this.__label){
                    		 this.__label.innerText= newValue;   
                    	}                                           
                    } 
                   
                }  

                                        
            }
            window.customElements.define('treez-text-area', TreezTextArea);                    

        </script>	
		
	</head>

</html>