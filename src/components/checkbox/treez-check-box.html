<!doctype html>
<html>

	<head>


		<link type="text/css" rel="stylesheet" href="treez-check-box.css" />
		

		<link rel="import" href="./../treezElement.html" >	

        <script>

            class TreezCheckBox extends TreezElement {

            	static get observedAttributes() {
            		return TreezElement.observedAttributes.concat(['label']);                    
                }

                 get label() {
				  return this.getAttribute('label');
				}

				set label(newValue) {
				  this.setAttribute('label', newValue);	
				}    

                constructor(){
                    super(); 
                    this.checkBox=undefined;   
                    this.labelElement=undefined;                         
                }            	

                connectedCallback() {
                	var self = this;

                    if(!self.checkBox){   

						var container = document.createElement('div');                   
						self.appendChild(container);                 

						var checkBox = document.createElement('input');                       
						self.checkBox = checkBox;
						checkBox.type='checkBox'	
						checkBox.className = 'treez-check-box';
						checkBox.value= self.value;	
						checkBox.onchange = ()=>this.__checkboxChanged();                                              
						container.appendChild(checkBox); 

						var labelElement = document.createElement('label');
						this.labelElement = labelElement;
						labelElement.innerText = self.label;   
						labelElement.className = 'treez-check-box-label';
						container.appendChild(labelElement);                                               
                                                              		
                    }
                }              

                __checkboxChanged(){
                	this.value = this.checkBox.checked;                	
                }  

                attributeChangedCallback(attr, oldValue, newValue) {
                	super.attributeChangedCallback(attr, oldValue, newValue) 
                    if(attr==='label'){
                    	if(this.labelElement){
                    		 this.labelElement.innerText= newValue;   
                    	}                                           
                    } 
                }  

                updateElements(newValue){
                	if(this.checkBox){                    	
						this.checkBox.value= newValue; 
                	}					    
                }                          
            }
            window.customElements.define('treez-check-box', TreezCheckBox);                    

        </script>	
		
	</head>

</html>